<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Learning Resource</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <div class="intro-layout">

  <div class="intro-section">
    <span class="intro-badge">Interactive Learning Resource</span>
    <h1 id="intro-title">Presentation Companion</h1>
    <div id="intro-paragraphs">
      <p>
        This site turns a lecture into something you can actually use afterward. Walk through the
        slides at your own pace and collect personalized prompts to use with any LLM.
      </p>
    </div>
  </div>

  <div class="intake-container">
    <h2>Tell us about yourself</h2>
    <p class="subtitle">We'll use this to tailor the prompts to your background.</p>

    <form id="intake-form">
      <div class="form-group">
        <label for="name">Your name <span class="optional">(optional)</span></label>
        <input type="text" id="name" name="name" placeholder="e.g., Priya Sharma">
      </div>

      <div class="form-group">
        <label for="profession">Your role or profession</label>
        <input type="text" id="profession" name="profession" placeholder="e.g., policy analyst, journalist, CS student" required>
        <p class="hint">This helps us frame concepts in terms relevant to your work.</p>
      </div>

      <div class="form-group">
        <label for="curiosity">What are you most curious about?</label>
        <textarea id="curiosity" name="curiosity" placeholder="e.g., How will this affect jobs in my industry? What should policymakers prioritize?" required></textarea>
        <p class="hint">Your answer shapes the prompts you'll receive throughout the presentation.</p>
      </div>

      <button type="submit" class="btn btn-primary" id="start-btn">
        Start Exploring
        <span>&rarr;</span>
      </button>
    </form>

    <p class="intake-privacy">
      Your information stays in your browser. Nothing is sent to any server.
    </p>
  </div>

  </div><!-- .intro-layout -->

  <script src="js/shared.js"></script>
  <script>
    CompanionConfig.load().then(function (config) {
      // Populate title
      var titleEl = document.getElementById('intro-title');
      if (titleEl && config.title) titleEl.textContent = config.title;

      // Update page title
      document.title = config.title + ' \u2014 Interactive Learning Resource';

      // Populate intro paragraphs
      if (config.intro && config.intro.paragraphs) {
        var container = document.getElementById('intro-paragraphs');
        container.innerHTML = '';
        config.intro.paragraphs.forEach(function (html) {
          var p = document.createElement('p');
          p.innerHTML = html;
          container.appendChild(p);
        });

        // Add reading list link if configured
        if (config.links && config.links.readingList) {
          var p = document.createElement('p');
          p.innerHTML = 'There\'s also a <a href="' + config.links.readingList + '" target="_blank">companion reading list</a> with curated references and ready-to-use deep research prompts for every topic in the presentation.';
          container.appendChild(p);
        }
      }

      // Pre-fill from localStorage if returning
      var saved = localStorage.getItem(CompanionConfig.storageKey('intake'));
      if (saved) {
        var data = JSON.parse(saved);
        if (data.name) document.getElementById('name').value = data.name;
        if (data.profession) document.getElementById('profession').value = data.profession;
        if (data.curiosity) document.getElementById('curiosity').value = data.curiosity;
      }

      document.getElementById('intake-form').addEventListener('submit', function (e) {
        e.preventDefault();
        var formData = {
          name: document.getElementById('name').value.trim(),
          profession: document.getElementById('profession').value.trim(),
          curiosity: document.getElementById('curiosity').value.trim()
        };
        localStorage.setItem(CompanionConfig.storageKey('intake'), JSON.stringify(formData));
        window.location.href = 'slides.html';
      });
    });
  </script>
</body>
</html>
